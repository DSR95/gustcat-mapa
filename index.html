<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GustCat - Descobreix els Sabors de Catalunya</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin="" />
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS propis -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/forms-modals.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <a href="#" class="logo" onclick="showTab('inici')">
                <div class="logo-icon">
                    <img src="https://i.imgur.com/pz2v1rp.jpg" 
                         alt="GustCat" 
                         style="height: 80px; width: auto; object-fit: contain;"
                         onerror="console.error('⚠ LOGO ERROR'); this.outerHTML='<span style=\'color: var(--text-dark); font-size: 2rem; font-weight: 700;\'>GustCat</span>';"
                         onload="console.log('✅ LOGO LOADED');">
                </div>
            </a>
            <nav>
                <ul>
                    <li><a href="#" onclick="showTab('inici')" id="tab-inici" class="active">Inici</a></li>
                    <li><a href="#" onclick="showTab('mapa')" id="tab-mapa">Mapa interactiu</a></li>
                    <li><a href="#" onclick="showTab('registre')" id="tab-registre" class="btn-primary">
                        <i class="fas fa-plus"></i> Afegeix el teu Comerç
                    </a></li>
                    <li><a href="#" onclick="showTab('contacte')" id="tab-contacte">Contacte</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Tab Content: Inici -->
    <div id="content-inici" class="tab-content active">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h1>Descobreix els Sabors Autèntics de Catalunya</h1>
                <p>Troba els millors productes artesans i especialitats locals dels comerços tradicionals catalans</p>
            </div>
        </section>

        <!-- Search Section -->
        <section class="search-section">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="🔍 Cerca per nom, producte o municipi..." id="searchInput">
                <select id="comarca-filter">
                    <option value="">📍 Totes les comarques</option>
                </select>
                <select id="municipi-filter">
                    <option value="">🏘️ Tots els municipis</option>
                </select>
                <select id="categoria-filter">
                    <option value="">🏷️ Totes les categories</option>
                    <option value="Carn (engreix: xai, vedella, porc, aviram)">🐄 Aviram i ous</option>
                    <option value="Elaboradors alimentaris (cuinats i conserves)">🥫 Elaboradors alimentaris</option>
                    <option value="Embotits propis">🥓 Carn i embotits</option>
                    <option value="Begudes artesanes (vi, cava, licors, cerveses)">🍷 Begudes artesanes</option>
                    <option value="Formatges i làctics">🧀 Formatges i làctics</option>
                    <option value="Oli i olives">🫒 Oli i olives</option>
                    <option value="Pa, pastissos">🍞 Pa i pastissos</option>
                    <option value="Peix, marisc">🐟 Peix i marisc</option>
                    <option value="Llegums">🌾 Llegums</option>
                    <option value="Pastes, arròs, cereals">🌾 Pastes, arròs, cereals</option>
                    <option value="Fruita seca">🥜 Fruita seca</option>
                    <option value="Fruita i verdures fresques">🍎 Fruita i verdures fresques</option>
                    <option value="Mel i condiments aromàtics">🍯 Mel i condiments aromàtics</option>
                    <option value="Restauració">🍽️ Restauració</option>
                </select>
                <button class="btn-primary" onclick="applyFilters()">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </section>

        <!-- Results Section -->
        <section class="results-section">
            <div class="results-header">
                <div>
                    <h2>Comerços Col·laboradors</h2>
                    <span class="results-count" id="resultsCount">Carregant...</span>
                </div>
                <div class="results-controls">
                    <div class="view-toggle">
                        <button class="view-btn active" onclick="setViewMode('grid')">
                            <i class="fas fa-th-large"></i>
                        </button>
                        <button class="view-btn" onclick="setViewMode('list')">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="commerce-grid fade-in-stagger" id="shops-container">
                <div class="loading">
                    <div class="spinner"></div>
                    Carregant comerços...
                </div>
            </div>
        </section>
    </div>

    <!-- Tab Content: Mapa -->
    <div id="content-mapa" class="tab-content">
        <section class="map-container">
            <aside class="filters-sidebar">
                <div class="filter-section">
                    <h3><i class="fas fa-filter"></i> Categories</h3>
                    <div class="category-filters" id="categoryFilters">
                        <div class="category-filter">
                            <input type="checkbox" id="cat-carn" data-cat="Carn (engreix: xai, vedella, porc, aviram)" checked>
                            <label for="cat-carn">
                                <div class="category-icon" style="background: #B8860B;">🐄</div>
                                Aviram i ous
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-elaboradors" data-cat="Elaboradors alimentaris (cuinats i conserves)" checked>
                            <label for="cat-elaboradors">
                                <div class="category-icon" style="background: #CD853F;">🥫</div>
                                Elaboradors
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-embotits" data-cat="Embotits propis" checked>
                            <label for="cat-embotits">
                                <div class="category-icon" style="background: #A0522D;">🥓</div>
                                Carn i embotits
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-begudes" data-cat="Begudes artesanes (vi, cava, licors, cerveses)" checked>
                            <label for="cat-begudes">
                                <div class="category-icon" style="background: #8B008B;">🍷</div>
                                Begudes
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-formatges" data-cat="Formatges i làctics" checked>
                            <label for="cat-formatges">
                                <div class="category-icon" style="background: #DAA520;">🧀</div>
                                Formatges i làctics
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-oli" data-cat="Oli i olives" checked>
                            <label for="cat-oli">
                                <div class="category-icon" style="background: #6B8E23;">🫒</div>
                                Oli i olives
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-pa" data-cat="Pa, pastissos" checked>
                            <label for="cat-pa">
                                <div class="category-icon" style="background: #D2691E;">🍞</div>
                                Pa i pastisseria
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-peix" data-cat="Peix, marisc" checked>
                            <label for="cat-peix">
                                <div class="category-icon" style="background: #4682B4;">🐟</div>
                                Peix i marisc
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-llegums" data-cat="Llegums" checked>
                            <label for="cat-llegums">
                                <div class="category-icon" style="background: #228B22;">🌾</div>
                                Llegums
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-pastes" data-cat="Pastes, arròs, cereals" checked>
                            <label for="cat-pastes">
                                <div class="category-icon" style="background: #F4A460;">🌾</div>
                                Pastes i cereals
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-fruita-seca" data-cat="Fruita seca" checked>
                            <label for="cat-fruita-seca">
                                <div class="category-icon" style="background: #8B4513;">🥜</div>
                                Fruita seca
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-fruita-fresca" data-cat="Fruita i verdures fresques" checked>
                            <label for="cat-fruita-fresca">
                                <div class="category-icon" style="background: #32CD32;">🍎</div>
                                Fruita i verdures
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-mel" data-cat="Mel i condiments aromàtics" checked>
                            <label for="cat-mel">
                                <div class="category-icon" style="background: #DAA520;">🍯</div>
                                Mel i condiments
                            </label>
                        </div>
                        <div class="category-filter">
                            <input type="checkbox" id="cat-restauracio" data-cat="Restauració" checked>
                            <label for="cat-restauracio">
                                <div class="category-icon" style="background: #800080;">🍽️</div>
                                Restauració
                            </label>
                        </div>
                    </div>
                </div>

                <button class="btn-primary" style="width: 100%; margin-top: 1rem;" onclick="applyMapFilters()">
                    <i class="fas fa-sync-alt"></i> Aplicar Filtres
                </button>
            </aside>

            <div id="map"></div>
        </section>
    </div>

    <!-- Tab Content: Registre -->
    <div id="content-registre" class="tab-content">
        <section class="section">
            <h2>Afegeix el teu comerç</h2>
            <p class="note">Omple el formulari i el revisarem. Més endavant connectarem aquest formulari amb la base de dades.</p>
            <div class="form-card">
                <form id="registerForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="f_nom">Nom del comerç *</label>
                            <input id="f_nom" name="nom" placeholder="Ex: Cal Pepet" required>
                        </div>
                        <div class="form-group">
                            <label for="f_comarca">Comarca</label>
                            <input id="f_comarca" name="comarca" placeholder="Ex: Garrotxa">
                        </div>
                        <div class="form-group">
                            <label for="f_muni">Municipi *</label>
                            <input id="f_muni" name="municipi" placeholder="Ex: Olot" required>
                        </div>
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label for="f_adreca">Adreça completa *</label>
                            <input id="f_adreca" name="adreca" placeholder="Carrer, número, CP, municipi" required>
                        </div>
                        <div class="form-group">
                            <label for="f_tel">Telèfon</label>
                            <input id="f_tel" name="telefon" placeholder="+34 123 456 789">
                        </div>
                        <div class="form-group">
                            <label for="f_email">Email de contacte</label>
                            <input id="f_email" name="email" type="email" placeholder="exemple@domini.com">
                        </div>
                        <div class="form-group">
                            <label for="f_web">Pàgina web</label>
                            <input id="f_web" name="web" placeholder="https://www.elmeucomercio.com">
                        </div>
                    </div>

                    <h3 style="margin: 2rem 0 1rem; color: var(--secondary-color); font-size: 1.5rem;">🌟 Producte estrella 1 *</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="f_p1_nom">Nom del producte *</label>
                            <input id="f_p1_nom" name="producte1_nom" placeholder="Ex: Llonganissa de Vic IGP" required>
                        </div>
                        <div class="form-group">
                            <label for="f_p1_cat">Categoria *</label>
                            <select id="f_p1_cat" name="producte1_categoria" required>
                                <option value="">Selecciona una categoria</option>
                                <option value="Carn (engreix: xai, vedella, porc, aviram)">🐄 Aviram i ous</option>
                                <option value="Elaboradors alimentaris (cuinats i conserves)">🥫 Elaboradors alimentaris</option>
                                <option value="Embotits propis">🥓 Carn i embotits</option>
                                <option value="Begudes artesanes (vi, cava, licors, cerveses)">🍷 Begudes artesanes</option>
                                <option value="Formatges i làctics">🧀 Formatges i làctics</option>
                                <option value="Oli i olives">🫒 Oli i olives</option>
                                <option value="Pa, pastissos">🍞 Pa i pastissos</option>
                                <option value="Peix, marisc">🐟 Peix i marisc</option>
                                <option value="Llegums">🌾 Llegums</option>
                                <option value="Pastes, arròs, cereals">🌾 Pastes, arròs, cereals</option>
                                <option value="Fruita seca">🥜 Fruita seca</option>
                                <option value="Fruita i verdures fresques">🍎 Fruita i verdures fresques</option>
                                <option value="Mel i condiments aromàtics">🍯 Mel i condiments aromàtics</option>
                                <option value="Restauració">🍽️ Restauració</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="f_p1_preu">Preu orientatiu</label>
                            <input id="f_p1_preu" name="producte1_preu" placeholder="Ex: 12€/kg">
                        </div>
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label for="f_p1_desc">Descripció del producte</label>
                            <textarea id="f_p1_desc" name="producte1_descripcio" placeholder="Explica què fa especial aquest producte..."></textarea>
                        </div>
                    </div>

                    <h3 style="margin: 2rem 0 1rem; color: var(--secondary-color); font-size: 1.5rem;">⭐ Producte estrella 2 (opcional)</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="f_p2_nom">Nom del producte</label>
                            <input id="f_p2_nom" name="producte2_nom" placeholder="Ex: Formatge de cabra artesà">
                        </div>
                        <div class="form-group">
                            <label for="f_p2_cat">Categoria</label>
                            <select id="f_p2_cat" name="producte2_categoria">
                                <option value="">Selecciona una categoria</option>
                                <option value="Carn (engreix: xai, vedella, porc, aviram)">🐄 Aviram i ous</option>
                                <option value="Elaboradors alimentaris (cuinats i conserves)">🥫 Elaboradors alimentaris</option>
                                <option value="Embotits propis">🥓 Carn i embotits</option>
                                <option value="Begudes artesanes (vi, cava, licors, cerveses)">🍷 Begudes artesanes</option>
                                <option value="Formatges i làctics">🧀 Formatges i làctics</option>
                                <option value="Oli i olives">🫒 Oli i olives</option>
                                <option value="Pa, pastissos">🍞 Pa i pastissos</option>
                                <option value="Peix, marisc">🐟 Peix i marisc</option>
                                <option value="Llegums">🌾 Llegums</option>
                                <option value="Pastes, arròs, cereals">🌾 Pastes, arròs, cereals</option>
                                <option value="Fruita seca">🥜 Fruita seca</option>
                                <option value="Fruita i verdures fresques">🍎 Fruita i verdures fresques</option>
                                <option value="Mel i condiments aromàtics">🍯 Mel i condiments aromàtics</option>
                                <option value="Restauració">🍽️ Restauració</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="f_p2_preu">Preu orientatiu</label>
                            <input id="f_p2_preu" name="producte2_preu" placeholder="Ex: 8€/unitat">
                        </div>
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label for="f_p2_desc">Descripció del producte</label>
                            <textarea id="f_p2_desc" name="producte2_descripcio" placeholder="Explica què fa especial aquest producte..."></textarea>
                        </div>
                    </div>

                    <div style="margin-top: 2rem; display: flex; gap: 1rem; align-items: center; padding: 1.5rem; background: var(--bg-cream); border-radius: var(--border-radius);">
                        <button type="submit" class="btn-primary" style="font-size: 1.1rem; padding: 0.8rem 2rem;">
                            <i class="fas fa-paper-plane"></i> Enviar Sol·licitud
                        </button>
                        <span class="note">📧 Revisarem la teva sol·licitud i ens posarem en contacte aviat</span>
                    </div>
                </form>
            </div>
        </section>
    </div>

    <!-- Tab Content: Contacte -->
    <div id="content-contacte" class="tab-content">
        <section class="section">
            <h2>Contacte</h2>
            <div class="form-card">
                <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">Posa't en contacte amb nosaltres per qualsevol consulta sobre GustCat.</p>
                <div class="contact-info">
                    <ul>
                        <li><i class="fas fa-envelope"></i> info@gustcat.cat</li>
                        <li><i class="fas fa-phone"></i> 93 123 45 67</li>
                        <li><i class="fas fa-map-marker-alt"></i> Barcelona, Catalunya</li>
                        <li><i class="fas fa-clock"></i> Horari d'atenció: Dilluns a Divendres, 9h-17h</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>GustCat</h3>
                <p>La plataforma per descobrir els millors productes artesans i comerços locals de Catalunya.</p>
                <div class="social-links">
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Per a Comerços</h3>
                <ul>
                    <li><a href="#" onclick="showTab('registre')"><i class="fas fa-plus-circle"></i> Afegeix el teu comerç</a></li>
                    <li><a href="#" onclick="showTab('mapa')"><i class="fas fa-map"></i> Mapa de comerços</a></li>
                    <li><a href="#"><i class="fas fa-question-circle"></i> Preguntes freqüents</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Descobreix</h3>
                <ul>
                    <li><a href="#" onclick="showTab('mapa')"><i class="fas fa-search"></i> Cerca comerços</a></li>
                    <li><a href="#" onclick="showTab('inici')"><i class="fas fa-star"></i> Productes destacats</a></li>
                    <li><a href="#"><i class="fas fa-route"></i> Rutes gastronòmiques</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Suport</h3>
                <ul>
                    <li><a href="#" onclick="showTab('contacte')"><i class="fas fa-envelope"></i> Contacte</a></li>
                    <li><a href="#"><i class="fas fa-shield-alt"></i> Política de Privacitat</a></li>
                    <li><a href="#"><i class="fas fa-file-contract"></i> Termes d'Ús</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 GustCat. Tots els drets reservats. Fet amb ❤️ a Catalunya</p>
        </div>
    </footer>

    <!-- Modal per detalls -->
    <div id="shop-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <div id="modal-header-content"></div>
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <!-- Modal per ampliar imatges -->
    <div id="image-modal" class="image-modal">
        <span class="image-modal-close">&times;</span>
        <div class="image-modal-content">
            <img id="modal-image" src="" alt="">
            <div class="image-modal-caption" id="modal-caption"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>
    
    <script src="js/config.js"></script>
    <script src="js/core.js"></script>
    <script src="js/data.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/map.js"></script>
    <script src="js/events.js"></script>
</body>
</html>
